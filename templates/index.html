<!DOCTYPE html>
<html>
<head>
    <title>EcoPackAI</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body class="container mt-5">

    <h2 class="text-success mb-4">Eco-Friendly Packaging Recommendation</h2>

    <form id="predictForm" class="card p-4 shadow">
        <label>Package Weight</label>
        <input type="number" step="0.1" id="weight" class="form-control mb-3" required>

        <label>Durability (1â€“10)</label>
        <input type="number" step="0.1" id="durability" class="form-control mb-3" required>

        <label>Recyclable</label>
        <select id="recyclable" class="form-control mb-3">
            <option value="1">Yes</option>
            <option value="0">No</option>
        </select>

        <label>Material Type</label>
        <select id="material" class="form-control mb-3">
            <option>PLA Bioplastic</option>
            <option>Recycled Cardboard</option>
            <option>Glass</option>
            <option>Bagasse Fiber</option>
        </select>

        <button type="submit" class="btn btn-success">Get AI Prediction</button>
    </form>

    <div class="mt-4">
        <h4>Prediction Results:</h4>
        <pre id="resultBox" class="bg-light p-3 border rounded"></pre>
    </div>

    <div class="mt-4">
    <h4>ðŸŒ± Top AI Material Recommendation</h4>
    <pre id="recommendBox" class="bg-success-subtle p-3 border rounded"></pre>
    </div>

<script>
document.addEventListener("DOMContentLoaded", function () {

    document.getElementById("predictForm").onsubmit = async function(e) {
        e.preventDefault();

        const data = {
            weight: parseFloat(document.getElementById("weight").value),
            durability: parseFloat(document.getElementById("durability").value),
            recyclable: parseInt(document.getElementById("recyclable").value),
            material: document.getElementById("material").value
        };
        const response = await fetch("/predict", {
            method: "POST",
            headers: {"Content-Type": "application/json"},
            body: JSON.stringify(data)
        });

        const result = await response.json();

        document.getElementById("resultBox").textContent =
            "Predicted Cost: $" + result.predicted_cost +
            "\nPredicted COâ‚‚: " + result.predicted_co2 +
            "\nEnvironmental Score: " + result.environment_score;
        const recResponse = await fetch("/recommend", {
            method: "POST",
            headers: {"Content-Type": "application/json"},
            body: JSON.stringify({})
        });

        const recResult = await recResponse.json();

        let output = "ðŸŒ± TOP RECOMMENDED MATERIAL\n";
        output += "âž¡ " + recResult.recommended_material + "\n\n";

        // ðŸ“Š FULL RANKING
        output += "ðŸ“Š MATERIAL RANKING\n";
        recResult.ranking.forEach((item, index) => {
            output += (index + 1) + ". " + item.material +
                      " (Score: " + item.environment_score + ")\n";
        });

        document.getElementById("recommendBox").textContent = output;
    };

});
</script>

</body>
</html>

